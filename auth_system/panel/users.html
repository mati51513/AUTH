<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accounts - Multi-Auth System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/modern-styles.css">
    <style>:root { --border-radius: 6px; }</style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
        <div class="loading-text">LOADING...</div>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container"></div>
    
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar glass-card">
            <div class="logo-container">
                <div class="gear-container"></div>
                <div class="logo-text">Multi-Auth</div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li class="active"><a href="users.html"><i class="fas fa-users"></i> Accounts</a></li>
                    <li><a href="keys.html"><i class="fas fa-key"></i> License Keys</a></li>
                    <li><a href="logs.html"><i class="fas fa-history"></i> Logs</a></li>
                    <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <header class="dashboard-header glass-card">
                <div class="header-title">
                    <h1><i class="fas fa-users"></i> Accounts</h1>
                </div>
                <div class="header-actions">
                    <div class="search-box">
                        <input type="text" id="userSearch" placeholder="Search licenses...">
                        <i class="fas fa-search"></i>
                    </div>
                    <button class="btn btn-primary" id="addUserBtn" style="display:none">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>
            </header>
            
            <div class="content-wrapper">
                <!-- Redeem License -->
                <div class="glass-card scroll-animate" style="margin-bottom: 16px;">
                    <div class="table-header">
                        <h2>Redeem License</h2>
                    </div>
                    <div class="form-group" style="display:flex; gap:8px; align-items:center;">
                        <input type="text" id="redeemInput" placeholder="Enter license key" style="flex:1;">
                        <button class="btn btn-primary" id="redeemBtn"><i class="fas fa-ticket"></i> Redeem</button>
                    </div>
                    <p class="small-text" style="margin-top:8px;">Redeem keys to bind them to your account. Once redeemed, you can view expiry and reset HWID.</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-container scroll-animate">
                    <div class="stats-card glass-card">
                        <div class="stats-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stats-info">
                            <h3>Total Users</h3>
                            <p class="stats-number">247</p>
                        </div>
                    </div>
                    <div class="stats-card glass-card">
                        <div class="stats-icon">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stats-info">
                            <h3>Active Users</h3>
                            <p class="stats-number">189</p>
                        </div>
                    </div>
                    <div class="stats-card glass-card">
                        <div class="stats-icon">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="stats-info">
                            <h3>New Today</h3>
                            <p class="stats-number">12</p>
                        </div>
                    </div>
                    <div class="stats-card glass-card">
                        <div class="stats-icon">
                            <i class="fas fa-user-slash"></i>
                        </div>
                        <div class="stats-info">
                            <h3>Banned Users</h3>
                            <p class="stats-number">8</p>
                        </div>
                    </div>
                </div>
                
                <!-- My Licenses -->
                <div class="table-container glass-card scroll-animate">
                    <div class="table-header">
                        <h2>My Licenses</h2>
                        <div class="table-actions">
                            <button class="btn btn-outline" id="refreshBtn">
                                <i class="fas fa-sync-alt spin-on-hover"></i> Refresh
                            </button>
                            <select id="statusFilter" class="btn btn-outline" style="margin-left:8px;">
                                <option value="all">All Statuses</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="revoked">Revoked</option>
                                <option value="frozen">Frozen</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>Status</th>
                                    <th>Expires</th>
                                    <th>HWID</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="myLicensesTableBody">
                                <!-- Filled by users.js -->
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination" style="display:none"></div>
                </div>
                
                <!-- License Stats Modal -->
                <div class="modal" id="licenseStatsModal" style="display:none;">
                    <div class="modal-content glass-card">
                        <div class="modal-header">
                            <h2>License Analytics</h2>
                            <button class="modal-close" id="closeStatsModal"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="modal-body">
                            <div id="statsContent">
                                <p><strong>Total Logs:</strong> <span id="statsTotalLogs">0</span></p>
                                <p><strong>Validations:</strong> <span id="statsValidations">0</span></p>
                                <p><strong>Success:</strong> <span id="statsSuccess">0</span> &nbsp; <strong>Failed:</strong> <span id="statsFailed">0</span></p>
                                <div id="statsLastEvent" style="margin-top:8px;">
                                    <p><strong>Last Event:</strong> <span id="statsLastAction">—</span> at <span id="statsLastTime">—</span></p>
                                    <p><strong>IP:</strong> <span id="statsLastIP">—</span> &nbsp; <strong>HWID:</strong> <span id="statsLastHWID">—</span></p>
                                    <p><strong>User Agent:</strong> <span id="statsLastUA">—</span></p>
                                    <p><strong>Message:</strong> <span id="statsLastMsg">—</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" id="dismissStats">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add/Edit User Modal -->
    <div class="modal" id="userModal">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2 id="modalTitle">Add New User</h2>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <div class="form-group">
                        <label for="role">Role</label>
                        <select id="role" name="role">
                            <option value="user">User</option>
                            <option value="moderator">Moderator</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" name="status">
                            <option value="active">Active</option>
                            <option value="pending">Pending</option>
                            <option value="banned">Banned</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close">Cancel</button>
                <button class="btn btn-primary" id="saveUserBtn">Save User</button>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h2>Confirm Deletion</h2>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this user? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close">Cancel</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <script src="js/animations.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/users.js"></script>
    <script src="js/security.js"></script>
</body>
</html>
